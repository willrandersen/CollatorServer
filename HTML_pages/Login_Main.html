<!DOCTYPE html>
<html lang="en">
<title>MOL Equipment Collator</title>
<h2>Welcome to the MOL and Dropship Equipment Information Collator</h2>
<h3> Please Login Below using your OneLogin ID </h3>
<script type="text/javascript">
    function login_request() {
        const Http = new XMLHttpRequest();
        const url= '/Login-Data';
        Http.open("POST", url);
        var form = new FormData();
        form.append('Username', document.getElementById('Username').value);
        form.append('Password', document.getElementById('Password').value);
        Http.send(form);
        Http.onreadystatechange = function() {
            if (Http.readyState == 4 && Http.status == 200) {
                var json_response = JSON.parse(Http.responseText);
                if (json_response.Logged_in) {
                    document.getElementById('paragraph_out').innerHTML = 'Welcome ' + json_response.Name;
                    document.cookie = 'logged_in_cookie=' + json_response.Cookie + '; max-age=1200; path=/;"';
                    window.location = '/Main';
                }
                else {
                    document.getElementById('paragraph_out').innerHTML = 'Invalid Credentials!'
                }
            }
        }
    }
</script>

<input type="text" id="Username" placeholder="Username"> <br> <br>
<input type="password" id="Password" placeholder="Password"> <br> <br>
<button onclick='login_request()' type="button" name="button">Login!</button> <br> <br>

<p id="paragraph_out"></p>
</html>
